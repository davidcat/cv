name: Deploy Resume to GitHub Pages

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Pages
      uses: actions/configure-pages@v4

    - name: Build HTML Resume
      run: |
        echo '<!DOCTYPE html>' > index.html
        echo '<html lang="zh-CN">' >> index.html
        echo '<head>' >> index.html
        echo '<meta charset="UTF-8">' >> index.html
        echo '<meta name="viewport" content="width=device-width, initial-scale=1.0">' >> index.html
        echo '<title>å¼ ä¸‰ - iOS å¼€å‘å·¥ç¨‹å¸ˆç®€å†</title>' >> index.html
        echo '<link rel="stylesheet" href="style.css">' >> index.html
        echo '</head>' >> index.html
        echo '<body>' >> index.html
        echo '<div class="container">' >> index.html
        echo '<header>' >> index.html
        echo '<h1>å¼ ä¸‰</h1>' >> index.html
        echo '<div class="contact-info">' >> index.html
        echo '<p>ğŸ“± 138-8888-8888 | âœ‰ï¸ zhangsan@email.com | ğŸ“ åŒ—äº¬å¸‚</p>' >> index.html
        echo '<p><a href="https://linkedin.com/in/zhangsan">LinkedIn</a> | <a href="https://github.com/zhangsan">GitHub</a></p>' >> index.html
        echo '</div>' >> index.html
        echo '</header>' >> index.html
        echo '<section class="summary">' >> index.html
        echo '<h2>ğŸ¯ ä¸ªäººç®€ä»‹</h2>' >> index.html
        echo '<p>èµ„æ·± iOS å¼€å‘å·¥ç¨‹å¸ˆï¼Œå…·æœ‰ 6 å¹´ç§»åŠ¨åº”ç”¨å¼€å‘ç»éªŒã€‚ç²¾é€š Swift å’Œ Objective-Cã€‚</p>' >> index.html
        echo '</section>' >> index.html
        echo '<section class="experience">' >> index.html
        echo '<h2>ğŸ’¼ å·¥ä½œç»å†</h2>' >> index.html
        echo '<div class="job">' >> index.html
        echo '<h3>é«˜çº§ iOS å·¥ç¨‹å¸ˆ | ç§»åŠ¨äº’è”ç½‘ç§‘æŠ€å…¬å¸</h3>' >> index.html
        echo '<p class="date">2021å¹´3æœˆ - è‡³ä»Š | åŒ—äº¬</p>' >> index.html
        echo '<ul><li>ä¸»å¯¼å…¬å¸æ ¸å¿ƒäº§å“ iOS åº”ç”¨å¼€å‘</li><li>ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Œå¯åŠ¨æ—¶é—´å‡å°‘ 70%</li></ul>' >> index.html
        echo '</div>' >> index.html
        echo '</section>' >> index.html
        echo '<section class="skills">' >> index.html
        echo '<h2>ğŸ› ï¸ æŠ€æœ¯æ ˆ</h2>' >> index.html
        echo '<div class="skill-tags">' >> index.html
        echo '<span class="tag">Swift</span><span class="tag">SwiftUI</span><span class="tag">UIKit</span>' >> index.html
        echo '</div>' >> index.html
        echo '</section>' >> index.html
        echo '</div>' >> index.html
        echo '</body>' >> index.html
        echo '</html>' >> index.html

    - name: Upload Pages artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'

  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4